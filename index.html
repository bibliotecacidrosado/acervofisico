<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Acervo da Biblioteca Cid Rosado</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      max-width: 900px; 
      margin: 20px auto; 
      padding: 20px; 
      background: #f5f5f5;
    }
    h1 {
      background: orange; 
      color: #fff; 
      padding: 15px; 
      text-align: center; 
      border-radius: 8px;
    }
    .resumo {
      margin: 15px 0; 
      font-weight: bold; 
      font-size: 16px;
    }
    #busca {
      width: 100%; 
      padding: 10px; 
      margin-bottom: 15px; 
      border-radius: 5px; 
      border: 1px solid #ccc; 
      font-size: 14px;
    }
    .lista-container {
      max-height: 500px; 
      overflow-y: auto; 
      border: 1px solid #ccc; 
      border-radius: 5px;
    }
    .cabecalho, .livro {
      display: flex; 
      padding: 10px; 
      align-items: center; 
      gap: 10px;
    }
    .cabecalho {
      position: sticky; 
      top: 0; 
      background: #ffb74d; 
      font-weight: bold; 
      z-index: 2; 
      border-bottom: 2px solid #ff9800;
    }
    .livro:nth-child(odd) {background: #fff;}
    .livro:nth-child(even) {background: #f9f9f9;}
    .livro span, .cabecalho span {
      flex: 1; 
      min-width: 120px;
    }
    .status {font-weight: bold;}
    .disponivel {color: green;}
    .indisponivel {color: red;}
    
    .controles {
      display: flex;
      justify-content: space-between;
      margin-bottom: 15px;
    }
    .btn {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
    }
    .btn:hover {
      background: #45a049;
    }

    /* --- Responsividade --- */
    @media (max-width: 600px) {
      .cabecalho {display: none;} /* tira cabeçalho no celular */
      .livro {
        flex-direction: column; 
        align-items: flex-start; 
        padding: 12px;
        border-bottom: 1px solid #ddd;
      }
      .livro span {
        min-width: unset;
        flex: none;
        display: block;
        width: 100%;
      }
      .livro span::before {
        font-weight: bold;
        color: #333;
        display: inline-block;
        width: 100%;
      }
      .livro span:nth-child(1)::before { content: "Título: "; }
      .livro span:nth-child(2)::before { content: "Autor: "; }
      .livro span:nth-child(3)::before { content: "Categoria: "; }
      .livro span:nth-child(4)::before { content: "Disponibilidade: "; }
      
      .controles {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
  <h1>Acervo da Biblioteca Escolar</h1>
  
  <div class="controles">
    <button class="btn" onclick="carregarDados()">Carregar Dados</button>
    <div>
      <label for="filtroStatus">Filtrar por status:</label>
      <select id="filtroStatus" onchange="filtrarLivros()">
        <option value="todos">Todos</option>
        <option value="Disponível">Disponível</option>
        <option value="Indisponível">Indisponível</option>
      </select>
    </div>
  </div>
  
  <div class="resumo" id="resumo">
    Total de livros no acervo: 0 | Disponíveis para empréstimo: 0
  </div>
  <input type="text" id="busca" placeholder="Buscar por título, autor ou categoria..." oninput="filtrarLivros()">

  <div class="lista-container">
    <!-- Cabeçalho da lista -->
    <div class="cabecalho">
      <span>Título</span>
      <span>Autor</span>
      <span>Categoria</span>
      <span>Disponibilidade</span>
    </div>
    <div id="listaLivros"></div>
  </div>

  <script>
    let livrosAcervo = [];
    let dadosCompletos = [];

    // Dados de exemplo - no GitHub você pode carregar de um arquivo JSON
    const dadosExemplo = {
      livros: [
        { 
          titulo: "Dom Casmurro", 
          autor: "Machado de Assis", 
          genero: "Literatura Brasileira", 
          ano: "1899", 
          total: 5, 
          emprestados: 2, 
          disponiveis: 3, 
          status: "Disponível" 
        },
        { 
          titulo: "O Cortiço", 
          autor: "Aluísio Azevedo", 
          genero: "Literatura Brasileira", 
          ano: "1890", 
          total: 3, 
          emprestados: 3, 
          disponiveis: 0, 
          status: "Indisponível" 
        },
        { 
          titulo: "Iracema", 
          autor: "José de Alencar", 
          genero: "Romance Indianista", 
          ano: "1865", 
          total: 4, 
          emprestados: 1, 
          disponiveis: 3, 
          status: "Disponível" 
        }
      ],
      totalLivros: 12,
      totalDisponiveis: 6
    };

    function carregarDados() {
      // Em produção, você pode carregar de um arquivo JSON
      // fetch('acervo.json')
      //   .then(response => response.json())
      //   .then(dados => {
      //     dadosCompletos = dados.livros;
      //     livrosAcervo = [...dadosCompletos];
      //     atualizarLista(dados);
      //   });
      
      // Usando dados de exemplo por enquanto
      dadosCompletos = dadosExemplo.livros;
      livrosAcervo = [...dadosExemplo.livros];
      atualizarLista(dadosExemplo);
    }

    function atualizarLista(dados){
      const lista = document.getElementById('listaLivros');
      lista.innerHTML = '';
      const resumo = document.getElementById('resumo');
      resumo.textContent = `Total de livros no acervo: ${dados.totalLivros} | Disponíveis para empréstimo: ${dados.totalDisponiveis}`;

      dados.livros.forEach(l => {
        const div = document.createElement('div');
        div.className = 'livro';
        div.innerHTML = `
          <span>${l.titulo}</span>
          <span>${l.autor}</span>
          <span>${l.genero}</span>
          <span class="status ${l.status === 'Disponível' ? 'disponivel' : 'indisponivel'}">${l.status}</span>`;
        lista.appendChild(div);
      });
    }

    function filtrarLivros(){
      const termo = document.getElementById('busca').value.toLowerCase();
      const statusFiltro = document.getElementById('filtroStatus').value;
      
      const listaFiltrada = dadosCompletos.filter(l => {
        const correspondeTermo = 
          l.titulo.toLowerCase().includes(termo) ||
          l.autor.toLowerCase().includes(termo) ||
          l.genero.toLowerCase().includes(termo);
        
        const correspondeStatus = statusFiltro === 'todos' || l.status === statusFiltro;
        
        return correspondeTermo && correspondeStatus;
      });

      const totalLivros = listaFiltrada.reduce((acc, l) => acc + l.total, 0);
      const totalDisponiveis = listaFiltrada.reduce((acc, l) => acc + l.disponiveis, 0);

      atualizarLista({livros: listaFiltrada, totalLivros, totalDisponiveis});
    }

    window.onload = carregarDados;
  </script>
</body>
</html>
